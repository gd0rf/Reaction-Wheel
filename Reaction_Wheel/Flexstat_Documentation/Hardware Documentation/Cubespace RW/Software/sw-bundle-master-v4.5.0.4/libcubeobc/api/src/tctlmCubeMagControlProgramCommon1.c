/************************************************************************************
 * This file was auto-generated by CIDEA                           .                *
 * Please do not modify the contents of this file manually.                         *
 ***********************************************************************************/

#include <cubeObc/cubeObc_typeDef.h>
#include <cubeObc/cubeObc_errorDef.h>
#include <cubeObc/cubeObc_tctlmCommsMasterSvc.h>
#include "tctlmCubeMagControlProgramCommon1.h"

/*******************************************************************************
 ***************************  GLOBAL MACROS   **********************************
 ******************************************************************************/

/*******************************************************************************
 **************************   GLOBAL FUNCTIONS   *******************************
 ******************************************************************************/

 /* SET functions */

ErrorCode tctlmCubeMagControlProgramCommon1_setConfig(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_Config *setVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 60;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 4)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare0 = ((setVal->primaryMagnetometerPref & 0x0F) << 0)
                    | ((setVal->primaryMagnetometerCurr & 0x0F) << 4);
        MEMCPY(&buffer[0], &prepare0, sizeof(U8));
        /*************************/
        MEMCPY(&buffer[1], &setVal->deployTimeout, sizeof(U16));
        /*************************/
        U8 prepare3 = ((setVal->primaryAutoSelect & 0x01) << 0);
        MEMCPY(&buffer[3], &prepare3, sizeof(U8));
        /*************************/
        bufferSizeUsed = 4;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_setMmcConfig(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_MmcConfig *setVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 61;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 12)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare0 = ((setVal->autoSample & 0x01) << 0)
                    | ((setVal->autoSamplePeriod & 0x7F) << 1);
        MEMCPY(&buffer[0], &prepare0, sizeof(U8));
        /*************************/
        U8 prepare1 = ((setVal->sampleFilterType & 0x0F) << 0)
                    | ((setVal->sampleFilterOrder & 0x0F) << 4);
        MEMCPY(&buffer[1], &prepare1, sizeof(U8));
        /*************************/
        MEMCPY(&buffer[2], &setVal->sampleFilterDepth, sizeof(U8));
        /*************************/
        U8 prepare3 = ((setVal->singleSampleTime & 0x1F) << 0)
                    | ((setVal->sampleBusyAction & 0x07) << 5);
        MEMCPY(&buffer[3], &prepare3, sizeof(U8));
        /*************************/
        MEMCPY(&buffer[4], &setVal->maxErrorsMag, sizeof(U32));
        /*************************/
        MEMCPY(&buffer[8], &setVal->maxErrorsTmp, sizeof(U32));
        /*************************/
        bufferSizeUsed = 12;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_setSamplePrimary(TypeDef_TctlmEndpoint *endpoint)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 67;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    if (result == CUBEOBC_ERROR_OK)
    {
        bufferSizeUsed = 0;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_setMmcCalibration(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_MmcCalibration *setVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 68;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 48)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&buffer[0], &setVal->xd1, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[4], &setVal->xd2, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[8], &setVal->xs1, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[12], &setVal->xs2, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[16], &setVal->yd1, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[20], &setVal->yd2, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[24], &setVal->ys1, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[28], &setVal->ys2, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[32], &setVal->zd1, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[36], &setVal->zd2, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[40], &setVal->zs1, sizeof(F32));
        /*************************/
        MEMCPY(&buffer[44], &setVal->zs2, sizeof(F32));
        /*************************/
        bufferSizeUsed = 48;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    return result;
}


 /* GET functions */

ErrorCode tctlmCubeMagControlProgramCommon1_getMmcCalibration(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_MmcCalibration *returnVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 185;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 48)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        bufferSizeUsed = 0;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        if (bufferSizeUsed != 48)
        {
            result = CUBEOBC_ERROR_TLM_SIZE;
        }
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->xd1, &buffer[0], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->xd2, &buffer[4], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->xs1, &buffer[8], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->xs2, &buffer[12], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->yd1, &buffer[16], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->yd2, &buffer[20], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->ys1, &buffer[24], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->ys2, &buffer[28], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->zd1, &buffer[32], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->zd2, &buffer[36], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->zs1, &buffer[40], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->zs2, &buffer[44], sizeof(F32));
    }
    /*************************/

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_getConfig(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_Config *returnVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 186;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 4)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        bufferSizeUsed = 0;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        if (bufferSizeUsed != 4)
        {
            result = CUBEOBC_ERROR_TLM_SIZE;
        }
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare0;
        MEMCPY(&prepare0, &buffer[0], sizeof(U8));
        returnVal->primaryMagnetometerPref = (TypesCubeMagControlProgramCommonTypes1_MagType)((prepare0 >> 0) & 0x0F);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare1;
        MEMCPY(&prepare1, &buffer[0], sizeof(U8));
        returnVal->primaryMagnetometerCurr = (TypesCubeMagControlProgramCommonTypes1_MagType)((prepare1 >> 4) & 0x0F);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->deployTimeout, &buffer[1], sizeof(U16));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare3;
        MEMCPY(&prepare3, &buffer[3], sizeof(U8));
        returnVal->primaryAutoSelect = (Boolean)((prepare3 >> 0) & 0x01);
    }
    /*************************/

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_getPrimaryMagMeasurementRaw(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_PrimaryMagMeasurementRaw *returnVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 187;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 13)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        bufferSizeUsed = 0;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        if (bufferSizeUsed != 13)
        {
            result = CUBEOBC_ERROR_TLM_SIZE;
        }
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->x_axis, &buffer[0], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->y_axis, &buffer[4], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->z_axis, &buffer[8], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare3;
        MEMCPY(&prepare3, &buffer[12], sizeof(U8));
        returnVal->dataValid = (Boolean)((prepare3 >> 0) & 0x01);
    }
    /*************************/

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_getState(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_State *returnVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 188;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 3)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        bufferSizeUsed = 0;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        if (bufferSizeUsed != 3)
        {
            result = CUBEOBC_ERROR_TLM_SIZE;
        }
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare0;
        MEMCPY(&prepare0, &buffer[0], sizeof(U8));
        returnVal->magState = (TypesCubeMagControlProgramCommonTypes1_MagState)((prepare0 >> 0) & 0xFF);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare1;
        MEMCPY(&prepare1, &buffer[1], sizeof(U8));
        returnVal->primaryMagState = (TypesCubeMagControlProgramCommonTypes1_MntState)((prepare1 >> 0) & 0xFF);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare2;
        MEMCPY(&prepare2, &buffer[2], sizeof(U8));
        returnVal->redMagState = (TypesCubeMagControlProgramCommonTypes1_MntState)((prepare2 >> 0) & 0xFF);
    }
    /*************************/

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_getMmcConfig(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_MmcConfig *returnVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 196;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 12)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        bufferSizeUsed = 0;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        if (bufferSizeUsed != 12)
        {
            result = CUBEOBC_ERROR_TLM_SIZE;
        }
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare0;
        MEMCPY(&prepare0, &buffer[0], sizeof(U8));
        returnVal->autoSample = (Boolean)((prepare0 >> 0) & 0x01);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare1;
        MEMCPY(&prepare1, &buffer[0], sizeof(U8));
        returnVal->autoSamplePeriod = (TypesCubeMagControlProgramCommonTypes1_SamplePeriod)((prepare1 >> 1) & 0x7F);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare2;
        MEMCPY(&prepare2, &buffer[1], sizeof(U8));
        returnVal->sampleFilterType = (TypesCubeMagControlProgramCommonTypes1_FilterType)((prepare2 >> 0) & 0x0F);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare3;
        MEMCPY(&prepare3, &buffer[1], sizeof(U8));
        returnVal->sampleFilterOrder = (TypesCubeMagControlProgramCommonTypes1_FilterOrder)((prepare3 >> 4) & 0x0F);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->sampleFilterDepth, &buffer[2], sizeof(U8));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare5;
        MEMCPY(&prepare5, &buffer[3], sizeof(U8));
        returnVal->singleSampleTime = (TypesCubeMagControlProgramCommonTypes1_SampleDuration)((prepare5 >> 0) & 0x1F);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare6;
        MEMCPY(&prepare6, &buffer[3], sizeof(U8));
        returnVal->sampleBusyAction = (TypesCubeMagControlProgramCommonTypes1_SampleBusy)((prepare6 >> 5) & 0x07);
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->maxErrorsMag, &buffer[4], sizeof(U32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->maxErrorsTmp, &buffer[8], sizeof(U32));
    }
    /*************************/

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_getPrimaryMagMeasurement(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_PrimaryMagMeasurement *returnVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 197;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 13)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        bufferSizeUsed = 0;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        if (bufferSizeUsed != 13)
        {
            result = CUBEOBC_ERROR_TLM_SIZE;
        }
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->x_axis, &buffer[0], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->y_axis, &buffer[4], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->z_axis, &buffer[8], sizeof(F32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        U8 prepare3;
        MEMCPY(&prepare3, &buffer[12], sizeof(U8));
        returnVal->dataValid = (Boolean)((prepare3 >> 0) & 0x01);
    }
    /*************************/

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_getPrimaryMagTemp(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_PrimaryMagTemp *returnVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 198;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 4)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        bufferSizeUsed = 0;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        if (bufferSizeUsed != 4)
        {
            result = CUBEOBC_ERROR_TLM_SIZE;
        }
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->temp, &buffer[0], sizeof(F32));
    }
    /*************************/

    return result;
}

ErrorCode tctlmCubeMagControlProgramCommon1_getPrimaryMagDiagnostics(TypeDef_TctlmEndpoint *endpoint, TypesCubeMagControlProgramCommon1_PrimaryMagDiagnostics *returnVal)
{
    ErrorCode result = CUBEOBC_ERROR_OK;
    TctlmCommsMasterSvc_Endpoint target;
    U8 *buffer;
    U32 bufferSize;
    U32 bufferSizeUsed;

    ZERO_VAR(target);

    target.id = 199;
    MEMCPY((U8 *)&target.endpoint, (U8 *)endpoint, sizeof(TypeDef_TctlmEndpoint));

    buffer = cubeObc_tctlmCommsMasterSvc_buffer(&target);
    bufferSize = cubeObc_tctlmCommsMasterSvc_bufferSize(&target);

    if (bufferSize < 16)
    {
        result = CUBEOBC_ERROR_SIZEL;
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        bufferSizeUsed = 0;
        result = cubeObc_tctlmCommsMasterSvc_sendReceive(&target, &bufferSizeUsed);
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        if (bufferSizeUsed != 16)
        {
            result = CUBEOBC_ERROR_TLM_SIZE;
        }
    }

    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->lastErrorMag, &buffer[0], sizeof(U32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->errorCountMag, &buffer[4], sizeof(U32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->lastErrorTmp, &buffer[8], sizeof(U32));
    }
    /*************************/
    if (result == CUBEOBC_ERROR_OK)
    {
        MEMCPY(&returnVal->errorCountTmp, &buffer[12], sizeof(U32));
    }
    /*************************/

    return result;
}

